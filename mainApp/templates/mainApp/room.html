<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Room</title>
    <link href="{% static 'chat.css' %}" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  </head>
  <body>
    <section style="background-color: #eee" id="main_group">
      <div class="container py-5">
        <div class="row d-flex justify-content-center">
          <div class="col-md-10 col-lg-8 col-xl-6">
            <div class="card" id="chat2">
              <div
                class="card-header d-flex justify-content-between align-items-center p-3"
              >
                <h5 class="mb-0">{{ room_name }}</h5>
                <button
                  type="button"
                  class="btn btn-primary btn-sm"
                  data-mdb-ripple-color="dark"
                  id="let_chat"
                >
                  Edit Room Name
                </button>
              </div>
              <div class="card-body" data-mdb-perfect-scrollbar="true">
                {% for name, msg in user_messages.items %}
                {% if name != user_name %}
                <div class="d-flex justify-content-between">
                  <p class="small mb-1"> {{ name }}</p>
                  <p class="small mb-1 text-muted">{{ msg.0.timestamp }}</p>
                </div>
                <div class="d-flex flex-row justify-content-start">
                  <img
                    src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp"
                    alt="avatar 1"
                    style="width: 45px; height: 100%"
                  />
                  <div>
                    {% for m in msg %}
                    <p
                      class="small p-2 ms-3 mb-1 rounded-3"
                      style="background-color: #f5f6f7"
                    >
                      {{ m.content }}
                    </p>
                    {% endfor %}
                  </div>
                </div>
                <br>
                {% else %}
                <div class="d-flex justify-content-end">
                  <p class="small mb-1 text-muted">{{ msg.0.timestamp }}</p>
                </div>
                <div class="d-flex flex-row justify-content-end mb-4 pt-1">
                  {% for m in msg %}
                  <p
                    class="small p-2 me-3 mb-1 text-white rounded-3 bg-primary"
                  >
                    {{ m.content }}
                  </p>
                  {% endfor %}
                </div>
                {% endif %}
                {% endfor %}
                
              </div>
              <div
                class="card-footer text-muted d-flex justify-content-start align-items-center p-3"
              >
                <img
                  src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3-bg.webp"
                  alt="avatar 3"
                  style="width: 40px; height: 100%"
                />
                <input
                  type="text"
                  class="form-control form-control-lg"
                  id="message_input"
                  placeholder="Type message"
                  maxlength="200"
                />
                <a class="ms-3" href="#!" id="message-submit">
                  <i class="bi-send" style="font-size: 1.8rem; color: cornflowerblue;"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script type="text/javascript" src="{% static 'chat.js' %}"></script>
  </body>
</html>
